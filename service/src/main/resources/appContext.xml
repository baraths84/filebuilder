<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:rcf="http://www.macys.com/schema/restclient" xmlns="http://www.springframework.org/schema/beans"
	   xmlns:util="http://www.springframework.org/schema/util"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans
 		http://www.springframework.org/schema/beans/spring-beans.xsd
 		http://www.macys.com/schema/restclient http://www.macys.com/schema/restclient/restclient.xsd
 		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
 		
 	<rcf:jaxRSClient name="customerListClientPool"
 					 hostName="${list.customer.service.host}"
                     basePath="${list.customer.service.basepath}"
                     poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
		             enableLogging="${default.rest.call.enable.logging}"
		             enableTracing="${default.rest.call.enable.logging}"
		             readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
		             connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
		             unwrapRootElement="true"
		             ClientId="${list.xapi.service.clientId}">
    </rcf:jaxRSClient>

 	<rcf:jaxRSClient name="customerWishlistClientPool"
 					 hostName="${list.customer.service.host}"
                     basePath="${wishlist.customer.service.basepath}"
                     poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
		             enableLogging="${default.rest.call.enable.logging}"
		             enableTracing="${default.rest.call.enable.logging}"
		             readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
		             connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
		             unwrapRootElement="true"
		             ClientId="${list.xapi.service.clientId}">
    </rcf:jaxRSClient>

 	<rcf:jaxRSClient name="customerUserProfileV1ClientPool"
 					 hostName="${list.customer.service.host}"
                     basePath="${user.profile.v1.customer.service.basepath}"
                     poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
		             enableLogging="${default.rest.call.enable.logging}"
		             enableTracing="${default.rest.call.enable.logging}"
		             readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
		             connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
		             unwrapRootElement="true"
		             ClientId="${list.xapi.service.clientId}">
    </rcf:jaxRSClient>

 	<rcf:jaxRSClient name="customerUserProfileV2ClientPool"
 					 hostName="${list.customer.service.host}"
                     basePath="${user.profile.v2.customer.service.basepath}"
                     poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
		             enableLogging="${default.rest.call.enable.logging}"
		             enableTracing="${default.rest.call.enable.logging}"
		             readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
		             connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
		             unwrapRootElement="true"
		             ClientId="${list.xapi.service.clientId}">
    </rcf:jaxRSClient>

 	<rcf:jaxRSClient name="promotionsClientPool" 
					 hostName="${list.promotions.service.host}"
					 basePath="${list.promotions.basepath}" 
					 poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
					 enableLogging="${default.rest.call.enable.logging}" 
					 enableTracing="${default.rest.call.enable.logging}"
					 readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
					 connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
					 unwrapRootElement="true" 
					 ClientId="${list.xapi.service.clientId}">
	</rcf:jaxRSClient>

 	<rcf:jaxRSClient name="upcClientPool"
					 hostName="${fcc.service.host}"
					 basePath="${fcc.catalog.basepath}"
					 poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
					 enableLogging="${default.rest.call.enable.logging}"
					 enableTracing="${default.rest.call.enable.logging}"
					 readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
					 connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
					 unwrapRootElement="true"
					 ClientId="${list.xapi.service.clientId}">
	</rcf:jaxRSClient>

	<rcf:jaxRSClient name="listClientPool"
					 hostName="${wishlist.service.host}"
					 basePath="${wishlist.service.basepath}"
					 poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
					 enableLogging="${default.rest.call.enable.logging}"
					 enableTracing="${default.rest.call.enable.logging}"
					 readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
					 connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
					 unwrapRootElement="true"
					 ClientId="${list.xapi.service.clientId}">
	</rcf:jaxRSClient>

	<util:map id="upcFieldsQuery" map-class="java.util.LinkedHashMap">
		<entry key="_fields">
			<util:list>
				<value>upc</value>
				<value>productId</value>
				<value>active</value>
				<value>price</value>
				<value>colorway</value>
				<value>attributes</value>
				<value>availability</value>
			</util:list>
		</entry>
	</util:map>

    <rcf:jaxRSClient name="productClientPool"
                     hostName="${fcc.service.host}"
                     basePath="${fcc.catalog.basepath}"
                     poolMaxSize="${default.rest.client.fixed.thread.pool.size}"
                     enableLogging="${default.rest.call.enable.logging}"
                     enableTracing="${default.rest.call.enable.logging}"
                     readTimeout="${default.rest.call.read.timeout.in.milliseconds}"
                     connectTimeout="${default.rest.call.connection.timeout.in.milliseconds}"
                     unwrapRootElement="true"
                     ClientId="${list.xapi.service.clientId}"
                     isSecured="false">
    </rcf:jaxRSClient>

    <util:list id="productFieldsQuery" list-class="java.util.ArrayList">
        <value>name</value>
        <value>active</value>
        <value>attributes</value>
        <value>primaryPortraitSource</value>
        <value>additionalImageSource</value>
        <value>primaryImage</value>
        <value>additionalImages</value>
        <value>colorwayImages</value>
        <value>reviewStatistics</value>
        <value>live</value>
        <value>displayCode</value>
        <value>defaultCategoryId</value>
        <value>shipping</value>
        <value>price</value>
        <value>available</value>
        <value>upcs</value>
        <value>memberProductIds</value>
		<value>finalPrice</value>
    </util:list>

	<bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator">
		<property name="proxyTargetClass" value="true"/>
		<property name="usePrefix" value="true"/>
		<property name="advisorBeanNamePrefix" value="killSwitchAdvisor"/>
	</bean>

	<bean id="dksKillSwitchContainer" class="com.macys.killswitch.bo.KillSwitchContainer"/>

	<bean id="dksKillSwitchHelper" class="com.macys.killswitch.helper.KillSwitchHelper">
		<property name="zookeeperEnabled" value="${zookeeper_enabled}"/>
		<property name="zookeeperKillSwitchFrameworkEnabled" value="${zookeeper_killswitch_framework_enabled:true}"/>
		<property name="zookeeperTreePath" value="${zookeeper_killswitch_tree_path}"/>
		<property name="localTreePath" value="${local_killswitch_tree_path}" />
	</bean>

	<bean id="killSwitchInterceptor" class="com.macys.killswitch.interceptor.KillSwitchInterceptor">
		<property name="killSwitchContainer" ref="dksKillSwitchContainer"/>
		<property name="killSwitchHelper" ref="dksKillSwitchHelper"/>
	</bean>

	<bean id="killSwitchAdvisor" class="com.macys.killswitch.advisor.KillSwitchAdvisor">
		<property name="interceptor" ref="killSwitchInterceptor"/>
		<property name="killSwitchHelper" ref="dksKillSwitchHelper"/>
		<property name="zookeeperKillSwitchFrameworkEnabled" value="${zookeeper_killswitch_framework_enabled:true}"/>
	</bean>

	<bean id="connectionConfig" class="com.macys.killswitch.client.config.ConnectionConfig">
		<property name="connectionTimeoutMs" value="15000" />
		<property name="sessionTimeoutMs" value="60000"/>
		<property name="maxWaitTimeMs" value="45000"/>
	</bean>

	<bean id="retryConfig" class="com.macys.killswitch.client.config.RetryConfig">
		<property name="retryCount" value="5" />
		<property name="elapsedTimeMs" value="5000" />
		<property name="intialConnectionSleepTimeMs" value="1000"/>
		<property name="reConnectionSleepTimeMs" value="60000"/>
	</bean>

	<bean id="killSwitchClientConfig" class="com.macys.killswitch.client.config.KillSwitchClientConfig">
		<property name="zookeeperServers" value="${zookeeper_servers}" />
		<property name="zookeeperEnabled" value="${zookeeper_enabled}"/>
		<property name="zookeeperKillSwitchFrameworkEnabled" value="${zookeeper_killswitch_framework_enabled:true}"/>
		<property name="zookeeperTreePath" value="${zookeeper_killswitch_tree_path}"/>
		<property name="localTreePath" value="${local_killswitch_tree_path}" />
		<property name="localStorageLocation" value="${local_killswitch_storage_location}" />
		<property name="localStorageEnabled" value="${zookeeper_local_storage_enabled}"/>
		<property name="localDevModeOverwriteEnabled" value="${local_killswitch_overwrite_in_dev_mode_enabled}"/>
		<property name="retryConfig" ref="retryConfig"/>
		<property name="connectionConfig" ref="connectionConfig"/>
		<property name="scanInterval" value="5000" />
	</bean>

	<bean id="killSwitchListener" class="com.macys.killswitch.client.listener.KillSwitchListener">
		<property name="killSwitchContainer" ref="dksKillSwitchContainer"/>
		<property name="killSwitchPropertyManager" ref="killSwitchPropertyManager"/>
	</bean>

	<bean id="killSwitchClientManager" class="com.macys.killswitch.client.manager.impl.KillSwitchClientManagerImpl">
		<property name="killSwitchClientConfig" ref="killSwitchClientConfig"/>
		<property name="killSwitchListener" ref="killSwitchListener"/>
		<property name="killSwitchContainer" ref="dksKillSwitchContainer"/>
	</bean>

	<bean id="localKillSwitchLoaderStrategy" class="com.macys.killswitch.loader.strategy.impl.LocalKillSwitchLoaderStrategy">
		<property name="killSwitchContainer" ref="dksKillSwitchContainer"/>
		<property name="killSwitchPropertyManager" ref="killSwitchPropertyManager"/>
	</bean>

	<bean id="zooKeeperKillSwitchLoaderStrategy" class="com.macys.killswitch.loader.strategy.impl.ZooKeeperKillSwitchLoaderStrategy">
		<property name="killSwitchClientConfig" ref="killSwitchClientConfig"/>
		<property name="killSwitchClientManager" ref="killSwitchClientManager"/>
		<property name="killSwitchContainer" ref="dksKillSwitchContainer"/>
	</bean>

	<bean id="KillSwitchLoaderContext" class="com.macys.killswitch.loader.context.KillSwitchLoaderContext">
		<property name="killSwitchLocalLoaderStrategy" ref="localKillSwitchLoaderStrategy"/>
		<property name="killSwitchZookeeperLoaderStrategy" ref="zooKeeperKillSwitchLoaderStrategy"/>
	</bean>

	<bean id="killSwitchPropertyManager" class="com.macys.killswitch.client.property.manager.impl.KillSwitchPropertyManagerImpl">
		<property name="killSwitchClientConfig" ref="killSwitchClientConfig"/>
	</bean>

	<bean id="killSwitchClientWorkflow" class="com.macys.killswitch.client.workflow.KillSwitchClientWorkflow">
		<property name="killSwitchClientConfig" ref="killSwitchClientConfig"/>
		<property name="killSwitchPropertyManager" ref="killSwitchPropertyManager"/>
		<property name="killSwitchLoaderContext" ref="KillSwitchLoaderContext"/>
		<property name="killSwitchContainer" ref="dksKillSwitchContainer"/>
		<property name="killSwitchClientManager" ref="killSwitchClientManager"/>
		<property name="killSwitchAdvisor" ref="killSwitchAdvisor"/>
	</bean>

</beans>